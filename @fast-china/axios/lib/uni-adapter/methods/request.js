"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("axios"),r=require("../../node_modules/.pnpm/axios@1.13.2/node_modules/axios/lib/core/settle.js"),s=require("../utils/index.js"),o=require("./onCanceled.js");exports.default=i=>new Promise((t,n)=>{const u=s.resolveUniAppRequestOptions(i),a=i;a.headers=new e.AxiosHeaders(u.header);const d=new o.default(i);let l=uni.request({...u,success(s){if(!l)return;const o=new e.AxiosHeaders(s.header),i={config:a,data:s.data,headers:o,status:s.statusCode,statusText:s.errMsg??"OK",request:l,cookies:s.cookies};r.default(t,n,i),l=null},fail(r){const{errMsg:s=""}=r??{};if(s){const r="request:fail abort"===s,o="request:fail ssl"===s,i="request:fail"===s||"request:fail "===s;"request:fail timeout"===s&&n(new e.AxiosError(s,e.AxiosError.ETIMEDOUT,a,l)),r&&n(new e.AxiosError(s,e.AxiosError.ECONNABORTED,a,l)),o&&n(new e.AxiosError(s,e.AxiosError.ERR_NETWORK,a,l)),i&&n(new e.AxiosError(s,e.AxiosError.ERR_NETWORK,a,l))}n(new e.AxiosError(r.errMsg,void 0,a,l)),l=null},complete(){d.unsubscribe()}});"function"==typeof i.onHeadersReceived&&l.onHeadersReceived(i.onHeadersReceived),d.subscribe(l,n)});
//# sourceMappingURL=request.js.map
