"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("axios"),s=require("../../node_modules/.pnpm/axios@1.8.4/node_modules/axios/lib/core/settle.js"),r=require("../utils/index.js"),o=require("./onCanceled.js");exports.default=t=>new Promise(((i,n)=>{const u=r.resolveUniAppRequestOptions(t),a=t;a.headers=new e.AxiosHeaders(u.header);const d=new o.default(t);let l=uni.request({...u,success(r){if(!l)return;const o=new e.AxiosHeaders(r.header),t={config:a,data:r.data,headers:o,status:r.statusCode,statusText:r.errMsg??"OK",request:l,cookies:r.cookies};s.default(i,n,t),l=null},fail(s){const{errMsg:r=""}=s??{};if(r){const s="request:fail "===r;"request:fail timeout"===r&&n(new e.AxiosError(r,e.AxiosError.ETIMEDOUT,a,l)),s&&n(new e.AxiosError(r,e.AxiosError.ERR_NETWORK,a,l))}n(new e.AxiosError(s.errMsg,void 0,a,l)),l=null},complete(){d.unsubscribe()}});"function"==typeof t.onHeadersReceived&&l.onHeadersReceived(t.onHeadersReceived),d.subscribe(l,n)}));
//# sourceMappingURL=request.js.map
