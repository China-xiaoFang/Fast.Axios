"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("axios"),o=require("../../node_modules/.pnpm/axios@1.8.3/node_modules/axios/lib/core/settle.js"),s=require("../utils/index.js"),r=require("./onCanceled.js");exports.default=i=>new Promise(((n,t)=>{const d=s.resolveUniAppRequestOptions(i),l=i;l.headers=new e.AxiosHeaders(d.header);const a=new r.default(i);let u=uni.downloadFile({...d,success(e){if(!u)return;const s={config:l,data:e.tempFilePath,headers:{},status:e.statusCode,statusText:e.errMsg??"OK",request:u};o.default(n,t,s),u=null},fail(o){const{errMsg:s=""}=o??{};if(s){"downloadFile:fail timeout"===s&&t(new e.AxiosError(s,e.AxiosError.ETIMEDOUT,l,u));"downloadFile:fail "===s&&t(new e.AxiosError(s,e.AxiosError.ERR_NETWORK,l,u))}t(new e.AxiosError(o.errMsg,void 0,l,u)),u=null},complete(){a.unsubscribe()}});"function"==typeof i.onDownloadProgress&&u.onProgressUpdate(s.progressEventReducer(i.onDownloadProgress,!0)),"function"==typeof i.onHeadersReceived&&u.onHeadersReceived(i.onHeadersReceived),a.subscribe(u,t)}));
//# sourceMappingURL=download.js.map
