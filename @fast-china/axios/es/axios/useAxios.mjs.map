{"version":3,"file":"useAxios.mjs","sources":["../../../../src/axios/useAxios.ts"],"sourcesContent":["import type { AxiosOptions, UseAxiosType } from \"./type\";\n\nconst state: UseAxiosType = {\n\ttimeout: 60000,\n\trequestCipher: true,\n\tloading: {\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tshow: (text: string): void => {},\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tclose: (options: AxiosOptions): void => {},\n\t},\n\tmessage: {\n\t\tsuccess: (message) => {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(`[Fast.Axios] ${message}`);\n\t\t},\n\t\twarning: (message) => {\n\t\t\tconsole.warn(`[Fast.Axios] ${message}`);\n\t\t},\n\t\tinfo: (message) => {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(`[Fast.Axios] ${message}`);\n\t\t},\n\t\terror: (message) => {\n\t\t\tconsole.error(`[Fast.Axios] ${message}`);\n\t\t},\n\t},\n\tmessageBox: {\n\t\tconfirm: (options) => {\n\t\t\tif (typeof uni !== \"undefined\") {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: \"温馨提示\",\n\t\t\t\t\t\tcontent: options.message,\n\t\t\t\t\t\tcancelText: options.cancelButtonText,\n\t\t\t\t\t\tconfirmText: options.confirmButtonText,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: (res) => {\n\t\t\t\t\t\t\tres && console.error(res);\n\t\t\t\t\t\t\tthrow new Error(\"'uni.showModal' Api调用异常。\");\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tif (typeof window.confirm === \"undefined\") {\n\t\t\t\t\t\tthrow new Error(\"'window.confirm' Api调用异常。\");\n\t\t\t\t\t}\n\t\t\t\t\t// eslint-disable-next-line no-alert\n\t\t\t\t\tif (window.confirm(options.message)) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n};\n\nexport const useAxios = (): UseAxiosType & { setOptions: (options: UseAxiosType) => void } => {\n\treturn {\n\t\t...state,\n\t\t/** 配置选项 */\n\t\tsetOptions: (options: UseAxiosType): void => {\n\t\t\tfor (const key in options) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(options, key)) {\n\t\t\t\t\t// 如果是对象类型的配置，进行深度合并\n\t\t\t\t\tif (typeof options[key] === \"object\" && options[key] !== null && state[key] && typeof state[key] === \"object\") {\n\t\t\t\t\t\tstate[key] = { ...state[key], ...options[key] };\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 否则直接更新\n\t\t\t\t\t\tstate[key] = options[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t};\n};\n"],"names":[],"mappings":"AAEA,MAAM,QAAsB;AAAA,EAC3B,SAAS;AAAA,EACT,eAAe;AAAA,EACf,SAAS;AAAA;AAAA,IAER,MAAM,CAAC,SAAuB;AAAA,IAAC;AAAA;AAAA,IAE/B,OAAO,CAAC,YAAgC;AAAA,IAAA;AAAA,EACzC;AAAA,EACA,SAAS;AAAA,IACR,SAAS,CAAC,YAAY;AAEb,cAAA,IAAI,gBAAgB,OAAO,EAAE;AAAA,IACtC;AAAA,IACA,SAAS,CAAC,YAAY;AACb,cAAA,KAAK,gBAAgB,OAAO,EAAE;AAAA,IACvC;AAAA,IACA,MAAM,CAAC,YAAY;AAEV,cAAA,IAAI,gBAAgB,OAAO,EAAE;AAAA,IACtC;AAAA,IACA,OAAO,CAAC,YAAY;AACX,cAAA,MAAM,gBAAgB,OAAO,EAAE;AAAA,IAAA;AAAA,EAEzC;AAAA,EACA,YAAY;AAAA,IACX,SAAS,CAAC,YAAY;AACjB,UAAA,OAAO,QAAQ,aAAa;AAC/B,eAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvC,cAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,SAAS,QAAQ;AAAA,YACjB,YAAY,QAAQ;AAAA,YACpB,aAAa,QAAQ;AAAA,YACrB,SAAS,CAAC,QAAQ;AACjB,kBAAI,IAAI,SAAS;AACR,wBAAA;AAAA,cAAA,OACF;AACC,uBAAA;AAAA,cAAA;AAAA,YAET;AAAA,YACA,MAAM,CAAC,QAAQ;AACP,qBAAA,QAAQ,MAAM,GAAG;AAClB,oBAAA,IAAI,MAAM,0BAA0B;AAAA,YAAA;AAAA,UAC3C,CACA;AAAA,QAAA,CACD;AAAA,MAAA,OACK;AACN,eAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACnC,cAAA,OAAO,OAAO,YAAY,aAAa;AACpC,kBAAA,IAAI,MAAM,2BAA2B;AAAA,UAAA;AAG5C,cAAI,OAAO,QAAQ,QAAQ,OAAO,GAAG;AAC5B,oBAAA;AAAA,UAAA,OACF;AACC,mBAAA;AAAA,UAAA;AAAA,QACR,CACA;AAAA,MAAA;AAAA,IACF;AAAA,EACD;AAEF;AAEO,MAAM,WAAW,MAAsE;AACtF,SAAA;AAAA,IACN,GAAG;AAAA;AAAA,IAEH,YAAY,CAAC,YAAgC;AAC5C,iBAAW,OAAO,SAAS;AAC1B,YAAI,OAAO,UAAU,eAAe,KAAK,SAAS,GAAG,GAAG;AAEvD,cAAI,OAAO,QAAQ,GAAG,MAAM,YAAY,QAAQ,GAAG,MAAM,QAAQ,MAAM,GAAG,KAAK,OAAO,MAAM,GAAG,MAAM,UAAU;AACxG,kBAAA,GAAG,IAAI,EAAE,GAAG,MAAM,GAAG,GAAG,GAAG,QAAQ,GAAG,EAAE;AAAA,UAAA,OACxC;AAEA,kBAAA,GAAG,IAAI,QAAQ,GAAG;AAAA,UAAA;AAAA,QACzB;AAAA,MACD;AAAA,IACD;AAAA,EAEF;AACD;"}