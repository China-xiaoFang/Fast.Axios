{"version":3,"file":"useAxios.js","sources":["../../../../src/axios/useAxios.ts"],"sourcesContent":["import type { AxiosOptions, UseAxiosType } from \"./type\";\n\nconst state: UseAxiosType = {\n\ttimeout: 60000,\n\trequestCipher: true,\n\tloading: {\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tshow: (text: string): void => {},\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tclose: (options: AxiosOptions): void => {},\n\t},\n\tmessage: {\n\t\tsuccess: (message) => {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(`[Fast.Axios] ${message}`);\n\t\t},\n\t\twarning: (message) => {\n\t\t\tconsole.warn(`[Fast.Axios] ${message}`);\n\t\t},\n\t\tinfo: (message) => {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(`[Fast.Axios] ${message}`);\n\t\t},\n\t\terror: (message) => {\n\t\t\tconsole.error(`[Fast.Axios] ${message}`);\n\t\t},\n\t},\n\tmessageBox: {\n\t\tconfirm: (options) => {\n\t\t\tif (typeof uni !== \"undefined\") {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: \"温馨提示\",\n\t\t\t\t\t\tcontent: options.message,\n\t\t\t\t\t\tcancelText: options.cancelButtonText,\n\t\t\t\t\t\tconfirmText: options.confirmButtonText,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: (res) => {\n\t\t\t\t\t\t\tres && console.error(res);\n\t\t\t\t\t\t\tthrow new Error(\"'uni.showModal' Api调用异常。\");\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tif (typeof window.confirm === \"undefined\") {\n\t\t\t\t\t\tthrow new Error(\"'window.confirm' Api调用异常。\");\n\t\t\t\t\t}\n\t\t\t\t\t// eslint-disable-next-line no-alert\n\t\t\t\t\tif (window.confirm(options.message)) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n};\n\nexport const useAxios = (): UseAxiosType & { setOptions: (options: UseAxiosType) => void } => {\n\treturn {\n\t\t...state,\n\t\t/** 配置选项 */\n\t\tsetOptions: (options: UseAxiosType): void => {\n\t\t\tfor (const key in options) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(options, key)) {\n\t\t\t\t\t// 如果是对象类型的配置，进行深度合并\n\t\t\t\t\tif (typeof options[key] === \"object\" && options[key] !== null && state[key] && typeof state[key] === \"object\") {\n\t\t\t\t\t\tstate[key] = { ...state[key], ...options[key] };\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 否则直接更新\n\t\t\t\t\t\tstate[key] = options[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t};\n};\n"],"names":["state","timeout","requestCipher","loading","show","text","close","options","message","success","console","log","warning","warn","info","error","messageBox","confirm","uni","Promise","resolve","reject","showModal","title","content","cancelText","cancelButtonText","confirmText","confirmButtonText","res","fail","Error","window","setOptions","key","Object","prototype","hasOwnProperty","call"],"mappings":"gFAEA,MAAMA,EAAsB,CAC3BC,QAAS,IACTC,eAAe,EACfC,QAAS,CAERC,KAAOC,IAAD,EAENC,MAAQC,IAAD,GAERC,QAAS,CACRC,QAAUD,IAEDE,QAAAC,IAAI,gBAAgBH,IAAS,EAEtCI,QAAUJ,IACDE,QAAAG,KAAK,gBAAgBL,IAAS,EAEvCM,KAAON,IAEEE,QAAAC,IAAI,gBAAgBH,IAAS,EAEtCO,MAAQP,IACCE,QAAAK,MAAM,gBAAgBP,IAAS,GAGzCQ,WAAY,CACXC,QAAUV,GACU,oBAARW,IACH,IAAIC,SAAQ,CAACC,EAASC,KAC5BH,IAAII,UAAU,CACbC,MAAO,OACPC,QAASjB,EAAQC,QACjBiB,WAAYlB,EAAQmB,iBACpBC,YAAapB,EAAQqB,kBACrBnB,QAAUoB,IACLA,EAAIZ,QACCG,IAEDC,GAAA,EAGTS,KAAOD,IAEA,MADCA,GAAAnB,QAAQK,MAAMc,GACf,IAAIE,MAAM,2BAA0B,GAE3C,IAGK,IAAIZ,SAAQ,CAACC,EAASC,KACxB,QAA0B,IAAnBW,OAAOf,QACX,MAAA,IAAIc,MAAM,6BAGbC,OAAOf,QAAQV,EAAQC,SAClBY,IAEDC,GAAA,uBAQW,KAChB,IACHrB,EAEHiC,WAAa1B,IACZ,IAAA,MAAW2B,KAAO3B,EACb4B,OAAOC,UAAUC,eAAeC,KAAK/B,EAAS2B,KAErB,iBAAjB3B,EAAQ2B,IAAsC,OAAjB3B,EAAQ2B,IAAiBlC,EAAMkC,IAA8B,iBAAflC,EAAMkC,GACrFlC,EAAAkC,GAAO,IAAKlC,EAAMkC,MAAS3B,EAAQ2B,IAGnClC,EAAAkC,GAAO3B,EAAQ2B,GAEvB"}