{"version":3,"sources":["../../../src/unplugin/index.ts"],"names":[],"mappings":";;;;;AAKa,IAAA,QAAA,GAAW,eAAe,MAAM;AAC5C,EAAM,MAAA,mBAAA,GAAsB,gBAAgB,sBAAsB,CAAA;AAClE,EAAM,MAAA,eAAA,GAAkB,gBAAgB,kBAAkB,CAAA;AAC1D,EAAO,OAAA;AAAA,IACN,IAAM,EAAA,4BAAA;AAAA,IACN,OAAS,EAAA,KAAA;AAAA,IACT,SAAA,CAAU,MAAM,EAA+B,EAAA;AAC9C,MAAA,IAAI,OAAQ,CAAA,GAAA,CAAI,YAAc,EAAA,QAAA,CAAS,IAAI,CAAG,EAAA;AAC7C,QAAI,IAAA,EAAA,CAAG,QAAS,CAAA,2BAA2B,CAAG,EAAA;AAC7C,UAAO,OAAA;AAAA,YACN,IAAM,EAAA,IAAA,CAAK,OAAQ,CAAA,QAAA,EAAU,YAAY;AAAA,WAC1C;AAAA;AAED,QAAI,IAAA,EAAA,CAAG,QAAS,CAAA,iDAAiD,CAAG,EAAA;AACnE,UAAO,OAAA;AAAA,YACN,IAAM,EAAA,CAAA,EACL,mBAAsB,GAAA,8CAAA,GAAiD,oBACxE;AAAA,wBAAA;AAAA,WACD;AAAA;AAED,QAAI,IAAA,EAAA,CAAG,QAAS,CAAA,6CAA6C,CAAG,EAAA;AAC/D,UAAO,OAAA;AAAA,YACN,IAAM,EAAA,CAAA,EAAG,eAAkB,GAAA,sCAAA,GAAyC,gBAAgB;AAAA,oBAAA;AAAA,WACrF;AAAA;AACD;AACD;AACD,GACD;AACD,CAAC","file":"chunk-D352PFRL.js","sourcesContent":["import process from \"node:process\";\nimport { isPackageExists } from \"local-pkg\";\nimport type { Thenable, TransformResult } from \"unplugin\";\nimport { createUnplugin } from \"unplugin\";\n\nexport const unplugin = createUnplugin(() => {\n\tconst hasFormDataPolyfill = isPackageExists(\"miniprogram-formdata\");\n\tconst hasBlobPolyfill = isPackageExists(\"miniprogram-blob\");\n\treturn {\n\t\tname: \"unplugin-uni-axios-adapter\",\n\t\tenforce: \"pre\",\n\t\ttransform(code, id): Thenable<TransformResult> {\n\t\t\tif (process.env.UNI_PLATFORM?.includes(\"mp\")) {\n\t\t\t\tif (id.includes(\"/form-data/lib/browser.js\")) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcode: code.replace(\"window\", \"globalThis\"),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (id.includes(\"/axios/lib/platform/browser/classes/FormData.js\")) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcode: `${\n\t\t\t\t\t\t\thasFormDataPolyfill ? \"import FormData from 'miniprogram-formdata';\" : \"class FormData {};\"\n\t\t\t\t\t\t}\\nexport default FormData;`,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (id.includes(\"/axios/lib/platform/browser/classes/Blob.js\")) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcode: `${hasBlobPolyfill ? \"import Blob from 'miniprogram-blob';\" : \"class Blob {};\"}\\nexport default Blob;`,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t};\n});\n"]}