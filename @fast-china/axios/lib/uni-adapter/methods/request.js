"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("axios"),r=require("../../node_modules/.pnpm/axios@1.13.2/node_modules/axios/lib/core/settle.js"),s=require("../utils/index.js"),o=require("./onCanceled.js");exports.default=i=>new Promise((t,a)=>{const n=s.resolveUniAppRequestOptions(i),u=i;u.headers=new e.AxiosHeaders(n.header);const d=new o.default(i);let l=uni.request({...n,success(s){if(!l)return;if(Array.isArray(s.header)){const e={};s.header.forEach(r=>Object.assign(e,r)),s.header=e}const o=new e.AxiosHeaders(s.header),i={config:u,data:s.data,headers:o,status:s.statusCode,statusText:s.errMsg??"OK",request:l,cookies:s.cookies};r.default(t,a,i),l=null},fail(r){const{errMsg:s=""}=r??{};if(s){const r="request:fail abort"===s,o="request:fail ssl"===s,i="request:fail"===s||"request:fail "===s;"request:fail timeout"===s&&a(new e.AxiosError(s,e.AxiosError.ETIMEDOUT,u,l)),r&&a(new e.AxiosError(s,e.AxiosError.ECONNABORTED,u,l)),o&&a(new e.AxiosError(s,e.AxiosError.ERR_NETWORK,u,l)),i&&a(new e.AxiosError(s,e.AxiosError.ERR_NETWORK,u,l))}a(new e.AxiosError(r.errMsg,void 0,u,l)),l=null},complete(){d.unsubscribe()}});"function"==typeof i.onHeadersReceived&&l.onHeadersReceived(i.onHeadersReceived),d.subscribe(l,a)});
//# sourceMappingURL=request.js.map
