{"version":3,"sources":["../../../src/unplugin/index.ts"],"names":[],"mappings":";;;;;AAKO,IAAM,QAAA,GAAW,eAAe,MAAM;AAC5C,EAAA,MAAM,mBAAA,GAAsB,gBAAgB,sBAAsB,CAAA;AAClE,EAAA,MAAM,eAAA,GAAkB,gBAAgB,kBAAkB,CAAA;AAC1D,EAAA,OAAO;AAAA,IACN,IAAA,EAAM,4BAAA;AAAA,IACN,OAAA,EAAS,KAAA;AAAA,IACT,SAAA,CAAU,MAAM,EAAA,EAA+B;AAC9C,MAAA,IAAI,OAAA,CAAQ,GAAA,CAAI,YAAA,EAAc,QAAA,CAAS,IAAI,CAAA,EAAG;AAC7C,QAAA,IAAI,EAAA,CAAG,QAAA,CAAS,2BAA2B,CAAA,EAAG;AAC7C,UAAA,OAAO;AAAA,YACN,IAAA,EAAM,IAAA,CAAK,OAAA,CAAQ,QAAA,EAAU,YAAY;AAAA,WAC1C;AAAA,QACD;AACA,QAAA,IAAI,EAAA,CAAG,QAAA,CAAS,iDAAiD,CAAA,EAAG;AACnE,UAAA,OAAO;AAAA,YACN,IAAA,EAAM,CAAA,EACL,mBAAA,GAAsB,8CAAA,GAAiD,oBACxE;AAAA,wBAAA;AAAA,WACD;AAAA,QACD;AACA,QAAA,IAAI,EAAA,CAAG,QAAA,CAAS,6CAA6C,CAAA,EAAG;AAC/D,UAAA,OAAO;AAAA,YACN,IAAA,EAAM,CAAA,EAAG,eAAA,GAAkB,sCAAA,GAAyC,gBAAgB;AAAA,oBAAA;AAAA,WACrF;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,GACD;AACD,CAAC","file":"chunk-ZB7Y5KDM.js","sourcesContent":["import process from \"node:process\";\nimport { isPackageExists } from \"local-pkg\";\nimport { createUnplugin } from \"unplugin\";\nimport type { Thenable, TransformResult } from \"unplugin\";\n\nexport const unplugin = createUnplugin(() => {\n\tconst hasFormDataPolyfill = isPackageExists(\"miniprogram-formdata\");\n\tconst hasBlobPolyfill = isPackageExists(\"miniprogram-blob\");\n\treturn {\n\t\tname: \"unplugin-uni-axios-adapter\",\n\t\tenforce: \"pre\",\n\t\ttransform(code, id): Thenable<TransformResult> {\n\t\t\tif (process.env.UNI_PLATFORM?.includes(\"mp\")) {\n\t\t\t\tif (id.includes(\"/form-data/lib/browser.js\")) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcode: code.replace(\"window\", \"globalThis\"),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (id.includes(\"/axios/lib/platform/browser/classes/FormData.js\")) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcode: `${\n\t\t\t\t\t\t\thasFormDataPolyfill ? \"import FormData from 'miniprogram-formdata';\" : \"class FormData {};\"\n\t\t\t\t\t\t}\\nexport default FormData;`,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (id.includes(\"/axios/lib/platform/browser/classes/Blob.js\")) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcode: `${hasBlobPolyfill ? \"import Blob from 'miniprogram-blob';\" : \"class Blob {};\"}\\nexport default Blob;`,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t};\n});\n"]}