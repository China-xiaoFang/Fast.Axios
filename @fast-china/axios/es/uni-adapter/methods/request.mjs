import{AxiosHeaders as e,AxiosError as s}from"axios";import r from"../../node_modules/.pnpm/axios@1.13.2/node_modules/axios/lib/core/settle.mjs";import{resolveUniAppRequestOptions as o}from"../utils/index.mjs";import t from"./onCanceled.mjs";const a=a=>new Promise((i,n)=>{const d=o(a),u=a;u.headers=new e(d.header);const c=new t(a);let l=uni.request({...d,success(s){if(!l)return;if(Array.isArray(s.header)){const e={};s.header.forEach(s=>Object.assign(e,s)),s.header=e}const o=new e(s.header),t={config:u,data:s.data,headers:o,status:s.statusCode,statusText:s.errMsg??"OK",request:l,cookies:s.cookies};r(i,n,t),l=null},fail(e){const{errMsg:r=""}=e??{};if(r){const e="request:fail abort"===r,o="request:fail ssl"===r,t="request:fail"===r||"request:fail "===r;"request:fail timeout"===r&&n(new s(r,s.ETIMEDOUT,u,l)),e&&n(new s(r,s.ECONNABORTED,u,l)),o&&n(new s(r,s.ERR_NETWORK,u,l)),t&&n(new s(r,s.ERR_NETWORK,u,l))}n(new s(e.errMsg,void 0,u,l)),l=null},complete(){c.unsubscribe()}});"function"==typeof a.onHeadersReceived&&l.onHeadersReceived(a.onHeadersReceived),c.subscribe(l,n)});export{a as default};
//# sourceMappingURL=request.mjs.map
